<div id="page">
    <div class="topnav">
        <a class="logo_img" routerLink="/"><img src="../../assets/images/logo.png"></a>
        <a *ngIf='!flag1' #signInModal data-toggle="modal" data-target="#signInModal">Sign In</a>
		<a *ngIf='flag1' (click)='signout()'>Sign Out</a>
		<a *ngIf='flag1' href="#"><img src="{{user[0].url}}" height="25px" width="25px"
				style="border-radius: 15px;">&nbsp; {{user[0].name}}</a>
        <a routerLink="/contact">Contact</a>
        <a routerLink="/about">About</a>
        <a (click)="planner()">Try Trip Planner</a>
        <a routerLink="/">Home</a>
    </div>
    <div class="modal fade" id='signInModal'>
		<div class="modal-dialog">
			<div class="modal-content" style="background-color: white;">
				<button type="button" class="close" #closeModal data-dismiss="modal">&times;</button>
				<h2>Login to yatraGuru</h2>
				<button class="btn btn-default" (click)="signInWithGoogle()">Login With
					<img src="http://transformations-spafitness.com/wp-content/uploads/2013/11/google-logo-icon-PNG-Transparent-Background-1-300x300.png"
						height="25px" width="25px">
				</button>
				<button class="btn btn-default" (click)="signInWithFB()">Login With
					<img src="../../assets/images/fb.png"
						height="25px" width="25px">
				</button>
			</div>
		</div>
	</div>
    <div id="myCarousel" class="carousel slide" data-ride="carousel">

        <!-- Wrapper for slides -->
        <div class="carousel-inner">
            <div class="item active">
                <img src="../../assets/images/flight-cover.jpg">
                <div class="carousel-caption">
                    <h1>Find Flights</h1>
                </div>
            </div>
        </div>

    </div>

    <div id="colorlib-reservation">
        <div class="row">
            <div class="search-wrap">
                <div class="tab-content">
                    <div id="flight" class="tab-pane fade in active">
                        <form #flightForm="ngForm" (submit)="actionFlight(flightForm.value)" ngNativeValidate
                            autocomplete="off" class="colorlib-form">
                            <div class="row">
                                <div class="col-md-2">
                                    <label for="origin">From:</label>
                                    <div class="form-field">
                                        <input type="text" id="origin" class="form-control" list="airport"
                                            placeholder="Search Location" name="origin"
                                            (keyup)='flightChange(flightForm.value.origin)'
                                            [(ngModel)]="flightObj.origin" required>
                                        <datalist id="airport">
                                            <option *ngFor="let air of airport" value="{{air}}"></option>
                                        </datalist>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <label for="destination">To:</label>
                                    <div class="form-field">
                                        <input type="text" id="destination" class="form-control" list="airport"
                                            placeholder="Search Location" class="form-control" name="destination"
                                            (keyup)='flightChange(flightForm.value.destination)'
                                            [(ngModel)]="flightObj.destination" required>
                                        <datalist id="airport">
                                            <option *ngFor="let air of airport" value="{{air}}"></option>
                                        </datalist>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <label for="date">Departure Date:</label>
                                    <div class="form-field">
                                        <input type="date" id="date" class="form-control" placeholder="departure date"
                                            name="date" [(ngModel)]="flightObj.date" required>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <label for="adults">Adults(12+ yrs):</label>
                                    <div class="form-field">
                                        <select id="adults" class="form-control" style="color:rgb(136, 133, 133)"
                                            name="adults" [(ngModel)]="flightObj.adults" required>
                                            <option value=1 selected>1</option>
                                            <option value=2>2</option>
                                            <option value=3>3</option>
                                            <option value=4>4</option>
                                            <option value=5>5</option>
                                            <option value=6>6</option>
                                            <option value=7>7</option>
                                            <option value=8>8</option>
                                            <option value=9>9</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <label for="children">Children(2-12 yrs):</label>
                                    <div class="form-field">
                                        <select id="children" class="form-control" style="color:rgb(136, 133, 133)"
                                            name="children" [(ngModel)]="flightObj.children" required>
                                            <option value=0 selected>0</option>
                                            <option value=1>1</option>
                                            <option value=2>2</option>
                                            <option value=3>3</option>
                                            <option value=4>4</option>
                                            <option value=5>5</option>
                                            <option value=6>6</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <label for="infants">Infants(under 2 yrs):</label>
                                    <div class="form-field">
                                        <select id="infants" class="form-control" style="color:rgb(136, 133, 133)"
                                            name="infants" [(ngModel)]="flightObj.infants" required>
                                            <option value=0 selected>0</option>
                                            <option value=1>1</option>
                                            <option value=2>2</option>
                                            <option value=3>3</option>
                                            <option value=4>4</option>
                                            <option value=5>5</option>
                                            <option value=6>6</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <label for="travelClass">Class:</label>
                                    <div class="form-field">
                                        <select id="travelClass" class="form-control" style="color:rgb(136, 133, 133)"
                                            name="travelClass" [(ngModel)]="flightObj.travelClass" required>
                                            <option value="ECONOMY" selected>Economy</option>
                                            <option value="BUSINESS">Business</option>
                                            <option value="FIRST">First</option>
                                            <option value="PREMIUM_ECONOMY">Premium Economy</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <input type="submit" name="submit" id="submit" value="Find Flights"
                                        class="btn btn-primary btn-block">
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="colorlib-wrap" style="margin-top: -100px;">
    <div class="container">
        <div class="row">
            <button id="openModal" #openModal hidden="true" data-toggle="modal"
                            data-target="#weatherModal"></button>
            <div *ngIf="!flag; else notShow">
                <h1>
                    Loading please wait..
                </h1>
            </div>
            <ng-template #notShow>
                <div class="row jumbotron" id="divWeather" style="width: 105%; height: 150px; background-color: #96b4e4"
                    (click)="myfunc()">
                    <div class="col-md-4">
                        <h3><b>{{weatherData[0].location.name}}, {{weatherData[0].location.region}}</b></h3>
                        <h3 style="margin-top: -15px;">{{weatherData[0].current.weather_descriptions}}</h3>

                    </div>
                    <div class="col-md-4">
                        <img src="{{weatherData[0].current.weather_icons}}" width="80px" height="80px"
                            style="display: inline; margin-top:-30px;">
                        <h1 style="display: inline;">{{weatherData[0].current.temperature}} &deg;C </h1>
                    </div>
                    <div class="col-md-4" style="font-size: larger;margin-top: -10px;">
                        Precipitation : {{weatherData[0].current.precip * 10}} % <br>
                        Humidity : {{weatherData[0].current.humidity}} % <br>
                        Wind Speed : {{weatherData[0].current.wind_speed}} Km/h<br>
                        
                    </div>
                </div>
                <div class="modal fade" id="weatherModal" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <h3 style="margin:0 auto"><b>YOUR SAFETY IS OUR PRIORITY</b></h3>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <!-- Modal body -->
                        <div class="modal-body" style="background-color: white; height: 500px;">
                            {{weatherData[2].message}}<br><br>
                            <h3><b>Safety Measures: </b></h3>
                            <ul>
                                <li *ngFor="let i of weatherData[3].tips">
                                    {{i}}
                                </li>
                            </ul>
                            <button class="close btn btn-primary" data-dismiss="modal"
                                style="width: 90px;font-size: 10px;color: black;">Close</button>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-8">
                        <div class="wrap-division" *ngIf="flightsData?.length > 0">
                            <div class="col-md-12 col-sm-12 animate-box" *ngFor="let item of flightsData; index as i">
                                <div class="row" style="border: 1px solid black; margin-bottom: 15px; padding: 5px;">
                                    <div class="col-md-2">
                                        <h4 style="color: #f0ad4e;">{{item.airline}}</h4>
                                        <h6 style="color: d9534f;">{{item.departureCode}} --> {{item.arrivalCode}}
                                        </h6>
                                    </div>
                                    <div class="col-md-3" style="text-align: center;">
                                        <h6 style="margin-bottom: 0px; margin-top: 10px;">{{originCity[1]}}</h6>
                                        {{item.departureDate | date:'mediumDate'}}<br>
                                        {{item.departureTime | time24to12hrs}}
                                    </div>
                                    <div class="col-md-2" style="text-align: center;">
                                        <h6 style="color: rgb(95, 95, 95); margin-top: 10px;">{{item.duration}}</h6>
                                        <h6 style="color: rgb(95, 95, 95);margin-top: -20px;">---------------></h6>
                                        <h6 style="color: rgb(95, 95, 95); margin-top: -20px;">{{item.type}}</h6>
                                    </div>
                                    <div class="col-md-3" style="text-align: center;">
                                        <h6 style="margin-bottom: 0px; margin-top: 10px;">{{destinationCity[1]}}
                                        </h6>
                                        {{item.arrivalDate | date:'mediumDate'}}<br>
                                        {{item.arrivalTime | time24to12hrs}}
                                    </div>
                                    <div class="col-md-2">
                                        <h4 style="margin-bottom: 0px; margin-top: 10px;">Price:</h4>
                                        <h5 style="color: #5bc0de;">Rs. {{item.price}}</h5>
                                        <div *ngIf="item.stops?.length > 0">
                                            <button class="btn btn-primary"
                                                style="width: 90px;font-size: 10px;color: black;" data-toggle="modal"
                                                [attr.data-target]="'#test' + i">Show Stops</button>

                                            <div class="modal fade" [attr.id]="'test' + i" role="dialog">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <button type="button" class="close"
                                                            data-dismiss="modal">&times;</button>
                                                    </div>
                                                    <!-- Modal body -->
                                                    <div class="modal-body"
                                                        style="background-color: white; height: 500px;">
                                                        <div class="col-md-12 col-sm-12 animate-box"
                                                            *ngFor="let items of item.stops">
                                                            <div class="row"
                                                                style="border: 1px solid black; margin-bottom: 15px; padding: 5px;">
                                                                <div class="col-md-5" style="text-align: center;">
                                                                    <h6 style="margin-bottom: 0px; margin-top: 10px;">
                                                                        {{items.departureCity}}</h6>
                                                                    {{items.departureDate | date:'mediumDate'}}<br>
                                                                    {{items.departureTime | time24to12hrs}}
                                                                </div>
                                                                <div class="col-md-2" style="text-align: center;">
                                                                    <h6 style="color: rgb(95, 95, 95);margin-top: 20px">
                                                                        ------></h6>
                                                                </div>
                                                                <div class="col-md-5" style="text-align: center;">
                                                                    <h6 style="margin-bottom: 0px; margin-top: 10px;">
                                                                        {{items.arrivalCity}}
                                                                    </h6>
                                                                    {{items.arrivalDate | date:'mediumDate'}}<br>
                                                                    {{items.arrivalTime | time24to12hrs}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <button class="close btn btn-primary" data-dismiss="modal"
                                                            style="width: 90px;font-size: 10px;color: black;">Close</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="wrap-division" *ngIf="flightsData?.length == 0">
                            <h1>Sorry! no flights found matching your creteria. Try using different locations.
                            </h1>
                        </div>

                    </div>

                    <!-- SIDEBAR-->
                    <div class="col-md-4">
                        <div class="side animate-box row jumbotron"
                            style=" width: 400px; height: 250px; padding: 10px;">
                            <h2 style="margin: 0 auto; color: rgba(0, 0, 0, 0.7);">COVID-19 Statistics</h2>
                            <div class="col-md-4">
                                <h3 style="color:#ff9900; height: 50px;font-size: 20px;">
                                    {{covidData[0].world.Country}}<br></h3>
                                <span style="color:#00BBF0">Total Cases: </span>
                                <br>{{covidData[0].world.TotalCases}}<br>
                                <span style="color:#00BBF0"> Recovered: </span><br>
                                {{covidData[0].world.TotalRecovered}}<br>
                                <span style="color:#00BBF0">Deaths: </span> <br>{{covidData[0].world.TotalDeaths}}
                            </div>
                            <div class="col-md-4">
                                <h3 style="color:#ff9900;height: 50px;font-size: 20px;">
                                    {{covidData[1].country.Country}}<br></h3>
                                <span style="color:#00BBF0">Total Cases: </span>
                                <br>{{covidData[1].country.TotalCases}}<br>
                                <span style="color:#00BBF0"> Recovered: </span><br>
                                {{covidData[1].country.TotalRecovered}}<br>
                                <span style="color:#00BBF0">Deaths: </span> <br>{{covidData[1].country.TotalDeaths}}
                            </div>
                            <div class="col-md-4" *ngIf ="covidData?.length > 2">
                                <h3 style="color:#ff9900;height: 50px;font-size: 20px;">{{covidData[2].state.state}}
                                </h3>
                                <span style="color:#00BBF0">Total Cases: </span><br>
                                {{covidData[2].state.confirmed}}<br>
                                <span style="color:#00BBF0"> Recovered: </span><br> {{covidData[2].state.recovered}}<br>
                                <span style="color:#00BBF0">Deaths: </span> <br>{{covidData[2].state.deaths}}
                            </div>
                        </div>
                        <div class="side animate-box">
                            <iframe width="400" height="400" frameborder="0" style="border:0" [src]="mapUrl | safePipe"
                                allowfullscreen>
                            </iframe>
                        </div>

                    </div>
                </div>
            </ng-template>
        </div>
    </div>
</div>
<footer id="colorlib-footer" role="contentinfo">
    <div class="container">
        <div class="row row-pb-md">
            <div class="col-md-3 colorlib-widget">
                <h4>YatraGuru</h4>
                <p>Your yatra buddy. Get complete information for your tour with us. Plan your trip
                    without
                    any
                    difficulty.</p>
                <ul class="colorlib-social-icons">
                    <li><a href="#"><i class="icon-twitter"></i></a></li>
                    <li><a href="#"><i class="icon-facebook"></i></a></li>
                    <li><a href="#"><i class="icon-linkedin"></i></a></li>
                    <li><a href="#"><i class="icon-dribbble"></i></a></li>
                </ul>
            </div>
            <div class="col-md-2 colorlib-widget">
                <h4>Search Now</h4>
                <ul class="colorlib-footer-links">
                    <li><a href="#">Flights</a></li>
                    <li><a href="#">Hotels</a></li>
                    <li><a href="#">Trains</a></li>
                    <li><a href="#">Restaurants</a></li>
                </ul>
            </div>
            <div class="col-md-2">
                <h4>Special features</h4>
                <ul class="colorlib-footer-links">
                    <li><a href="#">Weather based suggestions</a></li>
                    <li><a href="#">Give daywise plan for a location</a></li>
                    <li><a href="#">Trip planner to give you places to visit of a particular
                            location.</a>
                    </li>
                </ul>
            </div>

            <div class="col-md-3 col-md-push-1">
                <h4>Contact Information</h4>
                <ul class="colorlib-footer-links">
                    <li>IBM India Pvt Ltd, Ozone 2, SP Infocity <br> Fursungi , Pune , Maharashtra ,
                        IN
                        412308
                    </li>
                    <li><a href="tel://1234567920">+ 1235 2355 98</a></li>
                    <li><a href="mailto:info@yoursite.com">yatraGuru.service@gmail.com</a></li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 text-center">
                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                Copyright &copy;
                <script>document.write(new Date().getFullYear());</script> All rights reserved |
                YatraGuru
            </div>
        </div>
    </div>
</footer>